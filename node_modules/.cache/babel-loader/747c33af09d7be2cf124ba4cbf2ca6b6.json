{"remainingRequest":"F:\\GitHub\\Vue-project\\web-store\\node_modules\\babel-loader\\lib\\index.js!F:\\GitHub\\Vue-project\\web-store\\src\\basket\\Basket.js","dependencies":[{"path":"F:\\GitHub\\Vue-project\\web-store\\src\\basket\\Basket.js","mtime":1612872846514},{"path":"F:\\GitHub\\Vue-project\\web-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\GitHub\\Vue-project\\web-store\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiRjovR2l0SHViL1Z1ZS1wcm9qZWN0L3dlYi1zdG9yZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJGOi9HaXRIdWIvVnVlLXByb2plY3Qvd2ViLXN0b3JlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJGOi9HaXRIdWIvVnVlLXByb2plY3Qvd2ViLXN0b3JlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRjovR2l0SHViL1Z1ZS1wcm9qZWN0L3dlYi1zdG9yZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkY6L0dpdEh1Yi9WdWUtcHJvamVjdC93ZWItc3RvcmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IHsgbWV0aG9kcyB9IGZyb20gJy4uL2FwaS9jcnVkLmpzJzsKaW1wb3J0IHsgdXJscyB9IGZyb20gJy4uL2FwaS91cmxzLmpzJzsKCnZhciBCYXNrZXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEJhc2tldCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNrZXQpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYmFza2V0U3RvcmUiLCBbXSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJiYXNrZXQiLCBbXSk7CgogICAgdGhpcy5iYXNrZXRTdG9yZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiYXNrZXQnKSA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jhc2tldCcpKSA6IFtdOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEJhc2tldCwgW3sKICAgIGtleTogImFkZFByb2R1Y3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFByb2R1Y3QoaXRlbUlkKSB7CiAgICAgIHZhciBxdWFudGl0eSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMTsKICAgICAgdmFyIHNlYXJjaEl0ZW0gPSB0aGlzLmJhc2tldFN0b3JlID8gdGhpcy5iYXNrZXRTdG9yZS5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IGl0ZW1JZDsKICAgICAgfSkgOiAnJzsKCiAgICAgIGlmIChzZWFyY2hJdGVtICYmIHF1YW50aXR5ICE9PSAxKSB7CiAgICAgICAgc2VhcmNoSXRlbS5xdWFudGl0eSA9IHF1YW50aXR5OwogICAgICB9IGVsc2UgaWYgKHNlYXJjaEl0ZW0gJiYgcXVhbnRpdHkgPT09IDEpIHsKICAgICAgICBzZWFyY2hJdGVtLnF1YW50aXR5ICs9IHF1YW50aXR5OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYmFza2V0U3RvcmUgPSB0aGlzLmJhc2tldFN0b3JlIHx8IFtdOwogICAgICAgIHRoaXMuYmFza2V0U3RvcmUucHVzaCh7CiAgICAgICAgICAnaWQnOiBpdGVtSWQsCiAgICAgICAgICAncXVhbnRpdHknOiBxdWFudGl0eQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLl9iYXNrZXRTeW5jaW5nKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlUHJvZHVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdCgpIHt9CiAgfSwgewogICAga2V5OiAidXBkYXRlUHJvZHVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlUHJvZHVjdCgpIHt9CiAgfSwgewogICAga2V5OiAiZ2V0UHJvZHVjdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFByb2R1Y3RzKCkge30KICB9LCB7CiAgICBrZXk6ICJfYmFza2V0U3luY2luZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2Jhc2tldFN5bmNpbmcoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJiYXNrZXQiLCBKU09OLnN0cmluZ2lmeSh0aGlzLmJhc2tldFN0b3JlKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0QmFza2V0UHJvZHVjdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRCYXNrZXRQcm9kdWN0cyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB2YXIgaWRzLCB1cmw7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWRzID0gW107CiAgICAgICAgICAgICAgICB0aGlzLmJhc2tldFN0b3JlICE9PSB1bmRlZmluZWQgPyB0aGlzLmJhc2tldFN0b3JlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkcy5wdXNoKGl0ZW0uaWQpOwogICAgICAgICAgICAgICAgfSkgOiBmYWxzZTsKICAgICAgICAgICAgICAgIHVybCA9ICIiLmNvbmNhdCh1cmxzLmJhc2tldCkuY29uY2F0KGlkcyk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2RzLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlcSkgewogICAgICAgICAgICAgICAgICB2YXIgYmFza2V0ID0gX3RvQ29uc3VtYWJsZUFycmF5KHJlcS5yZXN1bHRzKTsKCiAgICAgICAgICAgICAgICAgIGJhc2tldC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmVJdGVtID0gX3RoaXMuYmFza2V0U3RvcmUuZmluZChmdW5jdGlvbiAocHJvZCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IHByb2QuaWQ7CiAgICAgICAgICAgICAgICAgICAgfSkgfHwgW107CiAgICAgICAgICAgICAgICAgICAgaXRlbVsncXVhbnRpdHknXSA9IHN0b3JlSXRlbS5xdWFudGl0eTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5iYXNrZXQgPSBiYXNrZXQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldEJhc2tldFByb2R1Y3RzKCkgewogICAgICAgIHJldHVybiBfZ2V0QmFza2V0UHJvZHVjdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEJhc2tldFByb2R1Y3RzOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gQmFza2V0Owp9KCk7CgpleHBvcnQgeyBCYXNrZXQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["F:/GitHub/Vue-project/web-store/src/basket/Basket.js"],"names":["methods","urls","Basket","basketStore","localStorage","getItem","JSON","parse","itemId","quantity","searchItem","find","item","id","push","_basketSyncing","setItem","stringify","ids","undefined","forEach","url","basket","get","then","req","results","map","storeItem","prod"],"mappings":";;;;;;;;;;;AAAA,SAAQA,OAAR,QAAsB,gBAAtB;AACA,SAAQC,IAAR,QAAmB,gBAAnB;;IACqBC,M;AAIjB,oBAAc;AAAA;;AAAA,yCAHA,EAGA;;AAAA,oCAFL,EAEK;;AACV,SAAKC,WAAL,GAAmBC,YAAY,CAACC,OAAb,CAAqB,QAArB,IAAiCC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAAjC,GAA8E,EAAjG;AACH;;;;+BAEUG,M,EAAoB;AAAA,UAAZC,QAAY,uEAAH,CAAG;AAC3B,UAAIC,UAAU,GAAG,KAAKP,WAAL,GAAmB,KAAKA,WAAL,CAAiBQ,IAAjB,CAAsB,UAACC,IAAD;AAAA,eAAUA,IAAI,CAACC,EAAL,KAAYL,MAAtB;AAAA,OAAtB,CAAnB,GAAyE,EAA1F;;AAEA,UAAIE,UAAU,IAAID,QAAQ,KAAK,CAA/B,EAAkC;AAC9BC,QAAAA,UAAU,CAACD,QAAX,GAAsBA,QAAtB;AAEH,OAHD,MAGO,IAAIC,UAAU,IAAID,QAAQ,KAAK,CAA/B,EAAkC;AACrCC,QAAAA,UAAU,CAACD,QAAX,IAAuBA,QAAvB;AAEH,OAHM,MAGA;AACH,aAAKN,WAAL,GAAmB,KAAKA,WAAL,IAAoB,EAAvC;AACA,aAAKA,WAAL,CAAiBW,IAAjB,CAAsB;AAAC,gBAAMN,MAAP;AAAe,sBAAYC;AAA3B,SAAtB;AAEH;;AAED,WAAKM,cAAL;AAEH;;;oCAEgB,CAEhB;;;oCAEgB,CAEhB;;;kCAEc,CAEd;;;qCAEgB;AACbX,MAAAA,YAAY,CAACY,OAAb,CAAqB,QAArB,EAA+BV,IAAI,CAACW,SAAL,CAAe,KAAKd,WAApB,CAA/B;AACH;;;;;;;;;;;;AAGOe,gBAAAA,G,GAAM,E;AACV,qBAAKf,WAAL,KAAqBgB,SAArB,GAAiC,KAAKhB,WAAL,CAAiBiB,OAAjB,CAAyB,UAAAR,IAAI;AAAA,yBAAIM,GAAG,CAACJ,IAAJ,CAASF,IAAI,CAACC,EAAd,CAAJ;AAAA,iBAA7B,CAAjC,GAAuF,KAAvF;AAEIQ,gBAAAA,G,aAASpB,IAAI,CAACqB,M,SAASJ,G;;uBAErBlB,OAAO,CAACuB,GAAR,CAAYF,GAAZ,EACDG,IADC,CACI,UAACC,GAAD,EAAS;AACX,sBAAMH,MAAM,sBAAOG,GAAG,CAACC,OAAX,CAAZ;;AACAJ,kBAAAA,MAAM,CAACK,GAAP,CAAW,UAACf,IAAD,EAAU;AACjB,wBAAMgB,SAAS,GAAG,KAAI,CAACzB,WAAL,CAAiBQ,IAAjB,CAAsB,UAAAkB,IAAI;AAAA,6BAAIjB,IAAI,CAACC,EAAL,KAAYgB,IAAI,CAAChB,EAArB;AAAA,qBAA1B,KAAsD,EAAxE;AACAD,oBAAAA,IAAI,CAAC,UAAD,CAAJ,GAAmBgB,SAAS,CAACnB,QAA7B;AAEH,mBAJD;AAKA,yBAAO,KAAI,CAACa,MAAL,GAAcA,MAArB;AACH,iBATC,C;;;;;;;;;;;;;;;;;;;;;SAjDOpB,M","sourcesContent":["import {methods} from '../api/crud.js'\r\nimport {urls} from '../api/urls.js'\r\nexport default class Basket {\r\n    basketStore = [];\r\n    basket = [];\r\n\r\n    constructor() {\r\n        this.basketStore = localStorage.getItem('basket') ? JSON.parse(localStorage.getItem('basket')) : []\r\n    }\r\n\r\n    addProduct(itemId, quantity=1) {\r\n        let searchItem = this.basketStore ? this.basketStore.find((item) => item.id === itemId) : ''\r\n\r\n        if (searchItem && quantity !== 1) {\r\n            searchItem.quantity = quantity;\r\n\r\n        } else if (searchItem && quantity === 1) {\r\n            searchItem.quantity += quantity;\r\n\r\n        } else {\r\n            this.basketStore = this.basketStore || []\r\n            this.basketStore.push({'id': itemId, 'quantity': quantity});\r\n\r\n        }\r\n\r\n        this._basketSyncing()\r\n\r\n    }\r\n\r\n    removeProduct () {\r\n\r\n    }\r\n\r\n    updateProduct () {\r\n\r\n    }\r\n\r\n    getProducts () {\r\n\r\n    }\r\n\r\n    _basketSyncing() {\r\n        localStorage.setItem(\"basket\", JSON.stringify(this.basketStore))\r\n    }\r\n\r\n    async getBasketProducts () {\r\n        let ids = []\r\n        this.basketStore !== undefined ? this.basketStore.forEach(item => ids.push(item.id)) : false\r\n\r\n        let url = `${urls.basket}${ids}`\r\n\r\n        await methods.get(url)\r\n            .then((req) => {\r\n                const basket = [...req.results]\r\n                basket.map((item) => {\r\n                    const storeItem = this.basketStore.find(prod => item.id === prod.id) || [];\r\n                    item['quantity'] = storeItem.quantity\r\n\r\n                })\r\n                return this.basket = basket\r\n            })\r\n\r\n    }\r\n}\r\n"]}]}