{"remainingRequest":"F:\\GitHub\\Vue-project\\web-store\\node_modules\\babel-loader\\lib\\index.js!F:\\GitHub\\Vue-project\\web-store\\src\\basket\\Basket.js","dependencies":[{"path":"F:\\GitHub\\Vue-project\\web-store\\src\\basket\\Basket.js","mtime":1612869740878},{"path":"F:\\GitHub\\Vue-project\\web-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\GitHub\\Vue-project\\web-store\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiRjovR2l0SHViL1Z1ZS1wcm9qZWN0L3dlYi1zdG9yZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJGOi9HaXRIdWIvVnVlLXByb2plY3Qvd2ViLXN0b3JlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJGOi9HaXRIdWIvVnVlLXByb2plY3Qvd2ViLXN0b3JlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRjovR2l0SHViL1Z1ZS1wcm9qZWN0L3dlYi1zdG9yZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkY6L0dpdEh1Yi9WdWUtcHJvamVjdC93ZWItc3RvcmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IHsgbWV0aG9kcyB9IGZyb20gJy4uL2FwaS9jcnVkLmpzJzsKaW1wb3J0IHsgdXJscyB9IGZyb20gJy4uL2FwaS91cmxzLmpzJzsKCnZhciBCYXNrZXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEJhc2tldCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNrZXQpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYmFza2V0U3RvcmUiLCBbXSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJiYXNrZXQiLCBbXSk7CgogICAgdGhpcy5iYXNrZXRTdG9yZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jhc2tldCcpKTsKICB9CgogIF9jcmVhdGVDbGFzcyhCYXNrZXQsIFt7CiAgICBrZXk6ICJhZGRQcm9kdWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRQcm9kdWN0KGl0ZW1JZCkgewogICAgICB2YXIgY291bnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDE7CiAgICAgIHZhciBzZWFyY2hJdGVtID0gdGhpcy5iYXNrZXRTdG9yZSA/IHRoaXMuYmFza2V0U3RvcmUuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlkID09PSBpdGVtSWQ7CiAgICAgIH0pIDogJyc7CgogICAgICBpZiAoc2VhcmNoSXRlbSAmJiBjb3VudCAhPT0gMSkgewogICAgICAgIHNlYXJjaEl0ZW0uY291bnQgPSBjb3VudDsKICAgICAgfSBlbHNlIGlmIChzZWFyY2hJdGVtICYmIGNvdW50ID09PSAxKSB7CiAgICAgICAgc2VhcmNoSXRlbS5jb3VudCArPSBjb3VudDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJhc2tldFN0b3JlID0gdGhpcy5iYXNrZXRTdG9yZSB8fCBbXTsKICAgICAgICB0aGlzLmJhc2tldFN0b3JlLnB1c2goewogICAgICAgICAgJ2lkJzogaXRlbUlkLAogICAgICAgICAgJ2NvdW50JzogY291bnQKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5fYmFza2V0U3luY2luZygpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZVByb2R1Y3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVByb2R1Y3QoKSB7fQogIH0sIHsKICAgIGtleTogInVwZGF0ZVByb2R1Y3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3QoKSB7fQogIH0sIHsKICAgIGtleTogImdldFByb2R1Y3RzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQcm9kdWN0cygpIHt9CiAgfSwgewogICAga2V5OiAiX2Jhc2tldFN5bmNpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9iYXNrZXRTeW5jaW5nKCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiYmFza2V0IiwgSlNPTi5zdHJpbmdpZnkodGhpcy5iYXNrZXRTdG9yZSkpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEJhc2tldFByb2R1Y3RzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0QmFza2V0UHJvZHVjdHMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgdmFyIGlkcywgdXJsOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlkcyA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5iYXNrZXRTdG9yZSAhPT0gdW5kZWZpbmVkID8gdGhpcy5iYXNrZXRTdG9yZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpZHMucHVzaChpdGVtLmlkKTsKICAgICAgICAgICAgICAgIH0pIDogZmFsc2U7CiAgICAgICAgICAgICAgICB1cmwgPSAiIi5jb25jYXQodXJscy5iYXNrZXQpLmNvbmNhdChpZHMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kcy5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXEpIHsKICAgICAgICAgICAgICAgICAgdmFyIGJhc2tldCA9IF90b0NvbnN1bWFibGVBcnJheShyZXEucmVzdWx0cyk7CgogICAgICAgICAgICAgICAgICBiYXNrZXQubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlSXRlbSA9IF90aGlzLmJhc2tldFN0b3JlLmZpbmQoZnVuY3Rpb24gKHByb2QpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSBwcm9kLmlkOwogICAgICAgICAgICAgICAgICAgIH0pIHx8IFtdOwogICAgICAgICAgICAgICAgICAgIGl0ZW1bJ2NvdW50J10gPSBzdG9yZUl0ZW0uY291bnQ7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYmFza2V0ID0gYmFza2V0OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRCYXNrZXRQcm9kdWN0cygpIHsKICAgICAgICByZXR1cm4gX2dldEJhc2tldFByb2R1Y3RzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRCYXNrZXRQcm9kdWN0czsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIEJhc2tldDsKfSgpOwoKZXhwb3J0IHsgQmFza2V0IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["F:/GitHub/Vue-project/web-store/src/basket/Basket.js"],"names":["methods","urls","Basket","basketStore","JSON","parse","localStorage","getItem","itemId","count","searchItem","find","item","id","push","_basketSyncing","setItem","stringify","ids","undefined","forEach","url","basket","get","then","req","results","map","storeItem","prod"],"mappings":";;;;;;;;;;;AAAA,SAAQA,OAAR,QAAsB,gBAAtB;AACA,SAAQC,IAAR,QAAmB,gBAAnB;;IACqBC,M;AAIjB,oBAAc;AAAA;;AAAA,yCAHA,EAGA;;AAAA,oCAFL,EAEK;;AACV,SAAKC,WAAL,GAAmBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAAnB;AACH;;;;+BAEUC,M,EAAiB;AAAA,UAATC,KAAS,uEAAH,CAAG;AACxB,UAAIC,UAAU,GAAG,KAAKP,WAAL,GAAmB,KAAKA,WAAL,CAAiBQ,IAAjB,CAAsB,UAACC,IAAD;AAAA,eAAUA,IAAI,CAACC,EAAL,KAAYL,MAAtB;AAAA,OAAtB,CAAnB,GAAyE,EAA1F;;AAEA,UAAIE,UAAU,IAAID,KAAK,KAAK,CAA5B,EAA+B;AAC3BC,QAAAA,UAAU,CAACD,KAAX,GAAmBA,KAAnB;AAEH,OAHD,MAGO,IAAIC,UAAU,IAAID,KAAK,KAAK,CAA5B,EAA+B;AAClCC,QAAAA,UAAU,CAACD,KAAX,IAAoBA,KAApB;AAEH,OAHM,MAGA;AACH,aAAKN,WAAL,GAAmB,KAAKA,WAAL,IAAoB,EAAvC;AACA,aAAKA,WAAL,CAAiBW,IAAjB,CAAsB;AAAC,gBAAMN,MAAP;AAAe,mBAASC;AAAxB,SAAtB;AAEH;;AAED,WAAKM,cAAL;AAEH;;;oCAEgB,CAEhB;;;oCAEgB,CAEhB;;;kCAEc,CAEd;;;qCAEgB;AACbT,MAAAA,YAAY,CAACU,OAAb,CAAqB,QAArB,EAA+BZ,IAAI,CAACa,SAAL,CAAe,KAAKd,WAApB,CAA/B;AACH;;;;;;;;;;;;AAGOe,gBAAAA,G,GAAM,E;AACV,qBAAKf,WAAL,KAAqBgB,SAArB,GAAiC,KAAKhB,WAAL,CAAiBiB,OAAjB,CAAyB,UAAAR,IAAI;AAAA,yBAAIM,GAAG,CAACJ,IAAJ,CAASF,IAAI,CAACC,EAAd,CAAJ;AAAA,iBAA7B,CAAjC,GAAuF,KAAvF;AAEIQ,gBAAAA,G,aAASpB,IAAI,CAACqB,M,SAASJ,G;;uBAErBlB,OAAO,CAACuB,GAAR,CAAYF,GAAZ,EACDG,IADC,CACI,UAACC,GAAD,EAAS;AACX,sBAAMH,MAAM,sBAAOG,GAAG,CAACC,OAAX,CAAZ;;AACAJ,kBAAAA,MAAM,CAACK,GAAP,CAAW,UAACf,IAAD,EAAU;AACjB,wBAAMgB,SAAS,GAAG,KAAI,CAACzB,WAAL,CAAiBQ,IAAjB,CAAsB,UAAAkB,IAAI;AAAA,6BAAIjB,IAAI,CAACC,EAAL,KAAYgB,IAAI,CAAChB,EAArB;AAAA,qBAA1B,KAAsD,EAAxE;AACAD,oBAAAA,IAAI,CAAC,OAAD,CAAJ,GAAgBgB,SAAS,CAACnB,KAA1B;AAEH,mBAJD;AAKA,yBAAO,KAAI,CAACa,MAAL,GAAcA,MAArB;AACH,iBATC,C;;;;;;;;;;;;;;;;;;;;;SAjDOpB,M","sourcesContent":["import {methods} from '../api/crud.js'\r\nimport {urls} from '../api/urls.js'\r\nexport default class Basket {\r\n    basketStore = [];\r\n    basket = [];\r\n\r\n    constructor() {\r\n        this.basketStore = JSON.parse(localStorage.getItem('basket'))\r\n    }\r\n\r\n    addProduct(itemId, count=1) {\r\n        let searchItem = this.basketStore ? this.basketStore.find((item) => item.id === itemId) : ''\r\n\r\n        if (searchItem && count !== 1) {\r\n            searchItem.count = count;\r\n\r\n        } else if (searchItem && count === 1) {\r\n            searchItem.count += count;\r\n\r\n        } else {\r\n            this.basketStore = this.basketStore || []\r\n            this.basketStore.push({'id': itemId, 'count': count});\r\n\r\n        }\r\n\r\n        this._basketSyncing()\r\n\r\n    }\r\n\r\n    removeProduct () {\r\n\r\n    }\r\n\r\n    updateProduct () {\r\n\r\n    }\r\n\r\n    getProducts () {\r\n\r\n    }\r\n\r\n    _basketSyncing() {\r\n        localStorage.setItem(\"basket\", JSON.stringify(this.basketStore))\r\n    }\r\n\r\n    async getBasketProducts () {\r\n        let ids = []\r\n        this.basketStore !== undefined ? this.basketStore.forEach(item => ids.push(item.id)) : false\r\n\r\n        let url = `${urls.basket}${ids}`\r\n\r\n        await methods.get(url)\r\n            .then((req) => {\r\n                const basket = [...req.results]\r\n                basket.map((item) => {\r\n                    const storeItem = this.basketStore.find(prod => item.id === prod.id) || [];\r\n                    item['count'] = storeItem.count\r\n\r\n                })\r\n                return this.basket = basket\r\n            })\r\n\r\n    }\r\n}\r\n"]}]}